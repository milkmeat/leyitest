{
  "name": "westgame2",
  "display_name": "West Game II",
  "package": "leyi.cowboyclash3",

  "default_resources": {
    "food": 0,
    "wood": 0,
    "stone": 0,
    "silver": 0
  },
  "resource_keywords": {
    "food": ["食物", "粮食", "food"],
    "wood": ["木材", "木头", "wood"],
    "stone": ["石头", "石材", "stone", "铁", "iron"],
    "silver": ["银币", "银", "silver", "金币", "金", "gold"]
  },
  "resource_order": ["food", "wood", "stone", "silver"],

  "scenes": [
    "main_city", "world_map", "hero", "hero_recruit",
    "battle", "popup", "loading", "story_dialogue", "unknown"
  ],

  "known_tasks": [
    "collect_resources", "upgrade_building", "train_troops",
    "claim_rewards", "navigate_main_city", "navigate_world_map",
    "close_popup", "check_mail", "collect_daily"
  ],

  "llm_game_description": "a mobile Western-themed SLG game called \"West Game II\" (西部游戏2)",
  "llm_task_types": "collect_resources, upgrade_building, train_troops, claim_rewards, navigate_main_city, navigate_world_map, close_popup, check_mail, collect_daily, gather_resource, scout_enemy, send_troops, custom",

  "known_popups": [
    ["buttons/view", "buttons/close_x"]
  ],
  "reward_templates": [
    "buttons/claim", "buttons/collect", "buttons/ok", "buttons/confirm"
  ],
  "close_text_patterns": ["关闭", "close", "×", "X"],
  "claim_text_patterns": ["领取", "claim", "collect", "收集", "一键领取"],

  "action_button_templates": [
    "buttons/upgrade_building", "buttons/upgrade", "buttons/build"
  ],
  "action_button_texts": [
    "一键上阵", "出战", "开始战斗", "攻击",
    "建造", "升级", "训练", "研究", "确定", "前往",
    "开始", "使用", "派遣", "出征", "行军", "下一个", "领取"
  ],

  "popup_close_templates": [
    "buttons/close", "buttons/close_x", "buttons/x",
    "buttons/cancel", "buttons/confirm", "buttons/ok"
  ],
  "popup_close_texts": [
    "返回领地", "关闭", "确定", "确认", "取消", "返回", "领取", "前往", "全部领取"
  ],

  "grid_cols": 8,
  "grid_rows": 6,

  "ocr_corrections": {
    "派道": "派遣",
    "镇发": "镇民",
    "采右": "采石"
  },

  "finger_ncc_threshold": 0.80,

  "city_layout": {
    "file": "city_layout.md",
    "reference_building": "城镇中心",
    "pixels_per_unit": 400,
    "hold_point": [540, 960],
    "hold_duration_ms": 3000,
    "screenshot_delay_ms": 2400,
    "drag_offset": 150,
    "tap_offset_x": 100,
    "tap_offset_y": 150
  },

  "quest_scripts": [
    {
      "name": "collect_resource",
      "pattern": "采集(?:资源)?(?P<resource_type>小麦|木材|石材|铁块|银币)",
      "steps": [
        {"ensure_world_map": [], "delay": 1.5, "description": "确认在世界地图"},
        {"tap_xy": [65, 1300], "delay": 2.0, "description": "点击搜索图标"},
        {"tap_text": ["木材", -1], "region": [0, 1350, 1080, 1500], "delay": 1.0, "optional": true, "description": "点击底部木材标签定位"},
        {"tap_text": ["铁块", -1], "region": [0, 1350, 1080, 1500], "delay": 1.0, "optional": true, "description": "点击底部铁块标签定位"},
        {"tap_xy": [540, 900], "delay": 1.5, "description": "点击空白位置关闭面板"},
        {"tap_xy": [65, 1300], "delay": 2.0, "description": "点击搜索图标"},
        {"tap_text": ["石材", -1], "region": [0, 1350, 1080, 1500], "delay": 1.0, "optional": true, "description": "点击底部石材标签定位"},
        {"tap_xy": [540, 900], "delay": 1.5, "description": "点击空白位置关闭面板"},
        {"tap_xy": [65, 1300], "delay": 2.0, "description": "点击搜索图标"},
        {"tap_text": ["{resource_type}", -1], "region": [0, 1350, 1080, 1500], "delay": 1.5, "description": "点击底部资源类型标签"},
        {"tap_text": ["搜索", -1], "delay": 1.5, "description": "点击最后一个搜索"},
        {"tap_xy": [540, 700], "delay": 1.5, "description": "点击采集按钮"},
        {"tap_text": ["均衡配置", -1], "region": [0, 1700, 1080, 1920], "delay": 1.5, "description": "点击均衡配置"},
        {"tap_text": ["行军", -1], "region": [0, 1700, 1080, 1920], "delay": 1.5, "description": "点击行军"}
      ]
    },
    {
      "name": "dispatch_citizens",
      "pattern": "派遣.*镇民",
      "steps": [
        {"tap_xy": [790, 1815], "delay": 1.0, "description": "切换到镇民标签"},
        {"tap_xy": [750, 1598], "delay": 1.5, "repeat": 3, "description": "点击+添加镇民"}
      ]
    },
    {
      "name": "pass_expedition",
      "pattern": "通过.*远征",
      "steps": [
        {"ensure_main_city": [], "delay": 1.5, "description": "确认在主城界面"},
        {"tap_icon": ["nav_bar/expedition"], "delay": 2.0, "description": "点击远征图标"},
        {"tap_text": ["开始战斗"], "delay": 1.5, "description": "点击开始战斗"},
        {"tap_text": ["一键上阵"], "delay": 1.5, "description": "点击一键上阵"},
        {"tap_xy": [900, 1870], "delay": 3.0, "description": "点击出战按钮"},
        {"wait_text": ["返回小镇"], "description": "等待战斗结束，出现返回小镇"},
        {"tap_text": ["返回小镇"], "delay": 1.5, "description": "点击返回小镇"}
      ]
    },
    {
      "name": "claim_quest_reward",
      "pattern": "领取任务奖励",
      "steps": [
        {"ensure_main_city": [], "delay": 1.5, "description": "确认在主城界面"},
        {"tap_xy": [70, 1600], "delay": 2.0, "description": "点击任务卷轴图标"},
        {"tap_text": ["章节任务"], "delay": 1.5, "description": "点击章节任务"},
        {"tap_text": ["领取", -1], "delay": 1.5, "repeat": 10, "optional": true, "description": "重复点击最后一个领取，找不到则停止"},
        {"tap_text": ["成长任务"], "delay": 1.5, "description": "点击成长任务"},
        {"tap_text": ["领取", -1], "delay": 1.5, "repeat": 10, "optional": true, "description": "重复点击最后一个领取，找不到则停止"},
        {"tap_text": ["每日任务"], "delay": 1.5, "description": "点击每日任务"},
        {"tap_text": ["领取", -1], "delay": 1.5, "repeat": 10, "optional": true, "description": "重复点击最后一个领取，找不到则停止"},
        {"tap_icon": ["buttons/close_x"], "delay": 1.5, "description": "关闭返回主城"}
      ]
    },
    {
      "name": "claim_expedition_reward",
      "pattern": "领取远征奖励",
      "steps": [
        {"ensure_main_city": [], "delay": 1.5, "description": "确认在主城界面"},
        {"tap_icon": ["nav_bar/expedition"], "delay": 2.0, "description": "点击远征图标"},
        {"tap_text": ["领取"], "delay": 1.5, "description": "点击领取奖励"},
        {"tap_text": ["领取"], "delay": 1.5, "optional": true, "description": "点击领取"},
        {"tap_text": ["确定"], "delay": 1.5, "description": "点击确定"},
        {"tap_icon": ["buttons/back_arrow"], "delay": 1.5, "description": "返回主城"}
      ]
    },
    {
      "name": "train",
      "pattern": "训练.*?(?P<troop_type>步兵|骑兵|远程兵)",
      "steps": [
        {"ensure_main_city": [], "delay": 1.5, "description": "确认在主城界面"},
        {"find_building": ["步兵营"], "delay": 2.0, "description": "定位到步兵营并点击"},
        {"tap_icon": ["icons/train_brawler"], "delay": 2.0, "description": "点击训练步兵图标进入训练界面"},
        {"tap_text": ["{troop_type}", -1], "delay": 1.5, "description": "点击兵种切换到目标兵种"},
        {"tap_text": ["训练", -1], "delay": 1.5, "description": "点击训练开始训练"},
        {"tap_icon": ["buttons/back_arrow"], "delay": 1.5, "description": "返回主城"}
      ]
    },
    {
      "name": "upgrade_building",
      "pattern": "将?(?P<building>.+?)升[至级]",
      "steps": [
        {"ensure_main_city": [], "delay": 1.5, "description": "确认在主城界面"},
        {"find_building": ["{building}"], "delay": 2.0, "description": "定位到建筑并点击"},
        {"tap_text": ["建造"], "delay": 2.0, "optional": true, "description": "点击建造（新建筑时出现）"},
        {"tap_icon": ["icons/upgrade_arrow"], "delay": 2.0, "optional": true, "description": "点击升级箭头图标"},
        {"tap_text": ["升级"], "delay": 2.0, "repeat": 5, "optional": true, "description": "点击升级"},
        {"tap_text": ["建造"], "delay": 2.0, "repeat": 2, "optional": true, "description": "点击建造"},
        {"tap_text": ["下一个"], "delay": 2.0, "repeat": 5, "optional": true, "description": "点击下一个"},
        {"tap_text": ["建造"], "delay": 2.0, "repeat": 2, "optional": true, "description": "点击建造"},
        {"tap_text": ["升级"], "delay": 2.0, "repeat": 2, "optional": true, "description": "点击升级"},
        {"tap_text": ["升级", -1], "delay": 2.0, "repeat": 2, "optional": true, "description": "点击最后一个升级"}
      ]
    }
  ]
}

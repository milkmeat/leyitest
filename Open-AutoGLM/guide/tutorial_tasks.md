# 新手教程自动化测试任务计划

基于 `xmind_structure.json` 拆分的手机自动化测试任务。

---

## 前置准备

```
/phone 启动游戏，进入新手教程对应的测试环境
```

---

## 第1阶段：CG 动画

### Task 1.1: 观看开场 CG
```
/phone 等待 CG 动画播放完成，如果有跳过按钮可以点击跳过
```

**验证点**: CG 播放结束，进入游戏主界面

---

## 第2阶段：第一场入侵战 (第1步)

### Task 2.1: 触发入侵战
```
/phone 进入游戏后，等待第一场入侵战触发，出现摇杆时滑动屏幕寻找敌人
```

### Task 2.2: 完成战斗
```
/phone 继续战斗，消灭所有敌人，完成入侵战
```

### Task 2.3: 返回城镇
```
/phone 战斗结束后，返回城镇
```

**验证点**: 入侵战结束，返回城镇界面

---

## 第3阶段：升级炮塔 TL (第2步)

### Task 3.1: 点击对话
```
/phone 出现对话框时，点击对话框继续剧情
```

### Task 3.2: 灭火操作
```
/phone 出现灭火气泡（水桶图标）时，点击手指指向的位置
```

### Task 3.3: 观看动画后点击对话
```
/phone 播放动画后，点击出现的对话框
```

### Task 3.4: 修复操作
```
/phone 出现修复气泡（锤子图标）时，点击手指指向的位置
```

### Task 3.5: 继续对话
```
/phone 点击出现的对话框，等待动画播放完成，再次点击对话框
```

**验证点**: 炮塔升级到1级

---

## 第4阶段：章节任务解锁 (第3步)

### Task 4.1: 潜入战剧情
```
/phone 观看潜入战剧情，带走图纸，被发现后逃窜的动画
```

### Task 4.2: 自由操作战斗
```
/phone 开始自由操作，士兵往前进攻，完成战斗
```

### Task 4.3: C1第4段 TL 对话
```
/phone 战斗结束后，点击对话框，观看女平民、领主的对话
```

### Task 4.4: 搜刮尸体
```
/phone 点击指引，搜刮尸体拿到图纸
```

### Task 4.5: 查看图纸
```
/phone 展示图纸时，按指引点击继续
```

**验证点**: 章节任务解锁

---

## 第5阶段：修城墙 (第4步)

### Task 5.1: 观看返回城镇剧情
```
/phone 观看领主带着士兵和女平民返回城镇的剧情动画
```

### Task 5.2: 查看对话
```
/phone 点击对话框，观看关于城镇和建筑蓝图的对话
```

### Task 5.3: 修复城墙提示
```
/phone 出现修复城墙的对话后，等待镜头定位到城门
```

### Task 5.4: 查看缺木头气泡
```
/phone 城门出现缺木头气泡（显示0/5），观看对话
```

### Task 5.5: 打开章节任务
```
/phone 点击章节任务左侧的按钮，打开章节任务界面
```

### Task 5.6: 点击修复伐木场任务
```
/phone 在章节任务界面，点击第二个任务"修复伐木场"的前往按钮
```

### Task 5.7: 修复伐木场
```
/phone 镜头定位到伐木场后，点击修复按钮，等待修复完成
```

### Task 5.8: 上阵工人
```
/phone 点击伐木场，点击工人tab，点击+号按钮上阵一个工人
```

### Task 5.9: 观看伐木表演
```
/phone 关闭建筑UI后，观看工人伐木表演，等待资源收集完成
```

### Task 5.10: 修复城墙
```
/phone 镜头拉到城墙，城墙展示资源充足气泡，点击气泡进行修复
```

**验证点**: 城墙修复完成

---

## 第6阶段：农场表演 (第5步)

### Task 6.1: 农场采集表演
```
/phone 农场上阵工人后，观看农场采集表演
```

### Task 6.2: 定位食堂
```
/phone 对话结束后，镜头定位到食堂
```

### Task 6.3: 修复食堂
```
/phone 点击食堂地块，点击修复按钮，等待修复完成
```

### Task 6.4: 食堂上阵工人
```
/phone 食堂修复完成后，点击食堂，点击上阵工人
```

**验证点**: 食堂修复完成，工人已上阵

---

## 第7阶段：触发吃饭 (第6步)

### Task 7.1: 吃饭 TL
```
/phone 食堂修复后，观看吃饭相关的 TL 动画
```

### Task 7.2: 上阵平民
```
/phone 按指引上阵平民到食堂
```

### Task 7.3: 观看吃饭和平民投奔
```
/phone 观看吃饭动画和平民投奔剧情
```

**验证点**: 吃饭 TL 结束，建筑工人展示出来

---

## 第8阶段：主城升2级 (第7步)

### Task 8.1: 完成章节任务升级主城
```
/phone 按照章节任务指引，完成任务升级主城到2级
```

### Task 8.2: 观看城镇动画
```
/phone 主城升级完成时，观看小型城镇动画和地表切换动画
```

**验证点**: 主城升级到2级，地表切换完成

---

## 第9阶段：特殊平民到来 (第8步)

### Task 9.1: 观看熊追逐 TL
```
/phone 观看两个平民奔跑被巨熊追逐的 TL 动画
```

### Task 9.2: 观看第一人称视角
```
/phone 切换到平民第一人称视角，观看熊扑上来被射杀的动画
```

### Task 9.3: 回到 SLG 视角
```
/phone 回到 SLG 视角，观看男主入镜的对话
```

### Task 9.4: 领取特殊平民
```
/phone 镜头拉回主城，打开特殊平民到来弹窗，点击前往按钮
```

### Task 9.5: 确认领取平民
```
/phone 打开平民弹窗后，按指引领取平民
```

**验证点**: 特殊平民已领取

---

## 第10阶段：特殊威胁 (第9步)

### Task 10.1: 观看威胁来袭
```
/phone 领取平民后，观看对话和威胁来袭横幅动画
```

### Task 10.2: 查看威胁弹窗
```
/phone 查看特殊威胁弹窗，注意倒计时循环播放，无法主动开战或退出
```

**验证点**: 特殊威胁已触发

---

## 第11阶段：防御塔建造 (第10步)

### Task 11.1: 触发防御塔建造对话
```
/phone 主城升3级后，观看关于建造防御塔的对话
```

### Task 11.2: 定位防御塔地基
```
/phone 镜头移动至防御塔地基位置，观看对话
```

### Task 11.3: 选择防御塔类型
```
/phone 点击地基，打开防御塔选择弹窗，点击燃油瓶防御塔
```

### Task 11.4: 观看防御塔 TL
```
/phone 建造完成后，观看平民跑上防御塔投掷燃油瓶的 TL 动画
```

**验证点**: 燃油瓶防御塔建造完成

---

## 第12阶段：特殊入侵战 (第11步)

### Task 12.1: 入侵战女主出场
```
/phone 防御塔建造完成后，观看入侵战女主出场 TL 动画
```

### Task 12.2: 观看女主对话
```
/phone 观看女主和达利帮小兵的对话
```

### Task 12.3: 战斗阶段
```
/phone 开始入侵战战斗，完成战斗
```

### Task 12.4: 入侵战结束
```
/phone 入侵战结束，观看女主跪倒的动画和对话
```

**验证点**: 特殊入侵战完成

---

## 第13阶段：女主加入 (第12步)

### Task 13.1: 观看 CG
```
/phone 主城升4级后，观看纯美术 CG 动画
```

### Task 13.2: 决斗前对话
```
/phone 观看士兵报告和领主与女主的对话
```

### Task 13.3: 进入决斗
```
/phone 进入决斗玩法场景
```

### Task 13.4: 完成 QTE 决斗
```
/phone 在决斗中，按住瞄准按钮，等待进度条到完美射击区域（红色），在胜利区域松手射击
```

### Task 13.5: 决斗胜利后对话
```
/phone 决斗胜利后，观看女主加入的对话
```

### Task 13.6: 领取新英雄
```
/phone 点击确认领取女主新英雄
```

**验证点**: 女主英雄已解锁

---

## 第14阶段：解锁远征 (第13步)

### Task 14.1: 远征解锁动画
```
/phone 获得女主后，观看远征解锁飞入动画
```

### Task 14.2: 进入远征
```
/phone 按指引点击进入远征
```

### Task 14.3: 第一关远征
```
/phone 进入第一关远征，等待英雄技能倒计时结束
```

### Task 14.4: 使用英雄技能
```
/phone 按指引释放英雄技能
```

### Task 14.5: 完成远征关卡
```
/phone 完成第一关远征
```

**验证点**: 远征功能已解锁，第一关完成

---

## 第15阶段：解锁雷达 (第14步)

### Task 15.1: 触发雷达 TL
```
/phone 主城升6级后，等待高级小镇横幅结束，触发雷达 TL
```

### Task 15.2: 观看联邦士兵 TL
```
/phone 观看联邦士兵骑马贴通缉令的 TL 动画
```

### Task 15.3: 查看通缉令对话
```
/phone 观看领主关于通缉令赚外快的对话
```

### Task 15.4: 点击雷达悬赏
```
/phone 出现雷达悬赏气泡后，点击进入
```

### Task 15.5: 进入雷达主界面
```
/phone 男主骑马跑出城外，镜头切换，进入雷达主界面
```

**验证点**: 雷达功能已解锁

---

## 打断/异常场景测试任务

以下任务用于测试各阶段的打断恢复机制：

### Task E.1: 测试点击空白处打断
```
/phone 在强指引过程中，尝试点击界面其他地方，验证无法打断指引
```

### Task E.2: 测试退出游戏恢复
```
/phone 在指引过程中退出游戏，重新进入后验证指引重新触发
```

### Task E.3: 测试断网恢复
```
/phone 在指引过程中断开网络，重连后验证指引重新触发
```

### Task E.4: 测试主城被动移城
```
/phone 在指引过程中触发主城被动移城，验证无弹窗且指引继续
```

---

## 任务执行检查清单

- [ ] 第1阶段：CG 动画
- [ ] 第2阶段：第一场入侵战
- [ ] 第3阶段：升级炮塔 TL
- [ ] 第4阶段：章节任务解锁
- [ ] 第5阶段：修城墙
- [ ] 第6阶段：农场表演
- [ ] 第7阶段：触发吃饭
- [ ] 第8阶段：主城升2级
- [ ] 第9阶段：特殊平民到来
- [ ] 第10阶段：特殊威胁
- [ ] 第11阶段：防御塔建造
- [ ] 第12阶段：特殊入侵战
- [ ] 第13阶段：女主加入
- [ ] 第14阶段：解锁远征
- [ ] 第15阶段：解锁雷达

---

## 备注

1. **强指引阶段**: 大部分新手教程为强指引，无法点击其他区域打断
2. **异常恢复**: 退出游戏或断网后重进，指引会重新触发
3. **资源保证**: 新手教程中的资源由数值保证，不会出现资源不足情况
4. **敏感操作**: 涉及支付等敏感操作时会请求确认
